#!/usr/bin/env python


import snmp_helper
   
ip_list = []
global sys_desc 
global sys_name 
global community_str


def checkIPFormat(ip_add):
    
    '''
    testing function if IP address entered into cmd is correct
    '''
    checker = 1
    ip4_sections = ip_add.split(".")
    if len(ip4_sections) == 4:
        for item in ip4_sections:
            if item.isdigit() == False:
                checker = 0
    else:
        print "Bad IP format, try it again"           
                
    if checker == 1:
        return  True
       
    else:
         print "Bad IP format, try it again"
         return False 

def loadData():
    '''
    loading user data (input)
    '''
    
    print "This is SNMP MIB2 sysName and sysDescr checke "
     
    global sys_desc = raw_input("Enter sys desc:" + '\n')
    global sys_name = raw_input("Enter sys name:" + '\n')
    global community_str = raw_input("Enter community string:" + '\n')
    
    print "Enter IP addresses for connection and end with key word CLOSE:" + '\n'
     
    while True:
         a = raw_input()
         if a == 'CLOSE':
             break
         else:
              if checkIPFormat(a) == True:
                 ip_list.append(a)
def getData(item):
    '''
    '''
    temp_list = (item, community_str, 161)
    return temp_list
           
    

def main():
    
    
    '''
    main function for inswerting data about snmp and devices, printing sysName and sysDescr values
    '''
    
    loadData()
    
    for item in ip_list:
        device_list = getData(item)
        print "##########################"
        for oidvalue in (sys_desc, sys_name):
             snmp_data = snmp_helper.snmp_get_oid(device_list, oid=oidvalue)
             output = snmp_helper.snmp_extract(snmp_data) 
             print output
        print "##############"
                                                                                                                  

if __name__ == "__main__":
    main()
    