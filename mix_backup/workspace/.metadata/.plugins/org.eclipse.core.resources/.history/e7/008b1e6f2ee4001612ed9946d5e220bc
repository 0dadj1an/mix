import telnetlib
import time
import socket
import sys


TIMEOUT = 6
TELNET_PORT = 23

class ConnectDevice02(object):
    
    
    def __init__(self, ip, username, password):
        self.ip = ip
        self.username = username
        self.password = password
        try:
            self.connection = telnetlib.Telnet(self.ip_add, TELNET_PORT, TIMEOUT)
        except socket.timeout:
                sys.exit("Unable to connect due timeout")
        
    def telnetSend(command):
        
         command = command.rstrip()
         self.connection.write(command + '\n')
         time.sleep(1)
         return self.connection.read_very_eager()


    def telnetLogin():
         output = self.connection.read_until("sername:", TIMEOUT)
         self.connection.write(username +'\n')
         output = output + self.connection.read_until("ssword:", TIMEOUT)
         self.connection.write(password +'\n')
         return output
     def telnetClose():
         self.connection.close()

    
            
def main():
    
    new_connection = ConnectDevice02('10.1.1.1', 'ahoj', 'cus')
    new_connection.    
        